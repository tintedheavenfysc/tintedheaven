xport default async function handler(req, res) {
  const API_URL = "https://api.lcedit.com/555906b8-8bcc-be72-144a-d399b8cbc9d9";
  const growthCommands = ["viral", "trending", "boost", "qna", "short"];

  try {
    const response = await fetch(API_URL);
    const data = await response.json();

    let total = 0;
    if (Array.isArray(data.events)) {
      for (const event of data.events) {
        if (growthCommands.includes(event.command)) {
          total += event.growth || 0;
        }
      }
    }

    res.setHeader("Content-Type", "text/plain");
    res.status(200).send(`growth: ${total}`);
  } catch (err) {
    console.error(err);
    res.status(500).send("growth: error");
  }
}
